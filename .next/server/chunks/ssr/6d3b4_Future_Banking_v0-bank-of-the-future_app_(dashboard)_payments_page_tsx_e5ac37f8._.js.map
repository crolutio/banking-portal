{"version":3,"sources":["../../../../../../../AI%20Agents/Future_Banking/v0-bank-of-the-future/app/%28dashboard%29/payments/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useMemo, useEffect } from \"react\"\nimport { useRole } from \"@/lib/role-context\"\n// removed getAccountsByUserId import\nimport { formatCurrency, formatAccountNumber } from \"@/lib/format\"\nimport { PageHeader } from \"@/components/ui/page-header\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\nimport { Badge } from \"@/components/ui/badge\"\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { CitationBadge, DataUsedBadges, ConfidenceIndicator } from \"@/components/ai/citation-badge\"\nimport {\n  ArrowRight,\n  Send,\n  Globe,\n  Building,\n  Plus,\n  Trash2,\n  Bot,\n  ShieldCheck,\n  AlertTriangle,\n  CheckCircle2,\n  Loader2,\n} from \"lucide-react\"\nimport type { Citation, Account } from \"@/lib/types\"\nimport { createClient } from \"@/lib/supabase/client\"\n\ninterface Beneficiary {\n  id: string\n  name: string\n  bankName: string\n  accountNumber: string\n  type: \"internal\" | \"domestic\" | \"international\"\n  country?: string\n}\n\nconst mockBeneficiaries: Beneficiary[] = [\n  {\n    id: \"ben_1\",\n    name: \"Sarah Johnson Savings\",\n    bankName: \"Bank of the Future\",\n    accountNumber: \"1234567891\",\n    type: \"internal\",\n  },\n  { id: \"ben_2\", name: \"Ahmed Al-Rashid\", bankName: \"Emirates NBD\", accountNumber: \"2345678901\", type: \"domestic\" },\n  {\n    id: \"ben_3\",\n    name: \"TechStart Solutions\",\n    bankName: \"Bank of the Future\",\n    accountNumber: \"3456789012\",\n    type: \"internal\",\n  },\n  {\n    id: \"ben_4\",\n    name: \"John Smith\",\n    bankName: \"HSBC UK\",\n    accountNumber: \"GB82WEST12345698765432\",\n    type: \"international\",\n    country: \"United Kingdom\",\n  },\n]\n\nfunction TransferForm() {\n  const { currentUser } = useRole()\n  const [accounts, setAccounts] = useState<Account[]>([])\n\n  useEffect(() => {\n    async function fetchAccounts() {\n      if (!currentUser?.id) return\n      const supabase = createClient()\n      const { data } = await supabase.from('accounts').select('*').eq('user_id', currentUser.id)\n      if (data) {\n        setAccounts(data.map((a: any) => ({\n          id: a.id,\n          userId: a.user_id,\n          name: a.name,\n          type: a.type,\n          currency: a.currency,\n          balance: Number(a.balance),\n          availableBalance: Number(a.available_balance),\n          accountNumber: a.account_number,\n          iban: a.iban,\n          status: a.status\n        })))\n      }\n    }\n    fetchAccounts()\n  }, [currentUser])\n\n  const [transferType, setTransferType] = useState<\"internal\" | \"domestic\" | \"international\">(\"internal\")\n  const [fromAccount, setFromAccount] = useState<string>(\"\")\n  const [toBeneficiary, setToBeneficiary] = useState<string>(\"\")\n  const [amount, setAmount] = useState<string>(\"\")\n  const [reference, setReference] = useState<string>(\"\")\n  const [showConfirm, setShowConfirm] = useState(false)\n  const [isProcessing, setIsProcessing] = useState(false)\n  const [showSuccess, setShowSuccess] = useState(false)\n\n  const filteredBeneficiaries = mockBeneficiaries.filter((b) => b.type === transferType)\n  const selectedBeneficiary = mockBeneficiaries.find((b) => b.id === toBeneficiary)\n  const selectedFromAccount = accounts.find((a) => a.id === fromAccount)\n\n  const getFees = () => {\n    if (transferType === \"internal\") return 0\n    if (transferType === \"domestic\") return 15\n    return Math.min(500, Math.max(25, Number.parseFloat(amount || \"0\") * 0.005))\n  }\n\n  const getETA = () => {\n    if (transferType === \"internal\") return \"Instant\"\n    if (transferType === \"domestic\") return \"1-2 business days\"\n    return \"3-5 business days\"\n  }\n\n  const handleTransfer = async () => {\n    setIsProcessing(true)\n    const supabase = createClient()\n    const numericAmount = Number(amount)\n\n    try {\n      // 1. Create debit transaction\n      const { error: txError } = await supabase.from('transactions').insert({\n        account_id: fromAccount,\n        amount: numericAmount,\n        type: 'debit',\n        category: 'transfer',\n        description: `Transfer to ${selectedBeneficiary?.name}`,\n        merchant: selectedBeneficiary?.name,\n        status: 'completed',\n        balance_after: (selectedFromAccount?.balance || 0) - numericAmount,\n        date: new Date().toISOString()\n      })\n      if (txError) throw txError\n\n      // 2. Update account balance\n      if (selectedFromAccount) {\n        await supabase.from('accounts')\n          .update({\n            balance: selectedFromAccount.balance - numericAmount,\n            available_balance: selectedFromAccount.availableBalance - numericAmount\n          })\n          .eq('id', fromAccount)\n      }\n\n      setShowConfirm(false)\n      setShowSuccess(true)\n      \n      // Ideally refresh accounts here\n    } catch (error) {\n      console.error(\"Transfer failed\", error)\n    } finally {\n      setIsProcessing(false)\n    }\n  }\n\n  const aiExplanation = {\n    message:\n      `Transfer of ${formatCurrency(Number.parseFloat(amount || \"0\"))} to ${selectedBeneficiary?.name || \"beneficiary\"}. ` +\n      `Fee: ${formatCurrency(getFees())}. Expected arrival: ${getETA()}.`,\n    citations: [\n      { id: \"cite_1\", source: \"Fees Policy v2.1\", type: \"policy\" as const },\n      { id: \"cite_2\", source: \"Transfer Terms\", type: \"product_terms\" as const },\n    ],\n    dataUsed: [\"Account Balance\", \"Fees Schedule\", \"Transfer Limits\"],\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <Tabs value={transferType} onValueChange={(v) => setTransferType(v as typeof transferType)}>\n        <TabsList className=\"grid w-full grid-cols-3\">\n          <TabsTrigger value=\"internal\" className=\"flex items-center gap-2\">\n            <Building className=\"h-4 w-4\" />\n            Internal\n          </TabsTrigger>\n          <TabsTrigger value=\"domestic\" className=\"flex items-center gap-2\">\n            <Send className=\"h-4 w-4\" />\n            Domestic\n          </TabsTrigger>\n          <TabsTrigger value=\"international\" className=\"flex items-center gap-2\">\n            <Globe className=\"h-4 w-4\" />\n            International\n          </TabsTrigger>\n        </TabsList>\n      </Tabs>\n\n      <div className=\"grid gap-6 lg:grid-cols-3\">\n        <div className=\"lg:col-span-2 space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"fromAccount\">From Account</Label>\n            <Select value={fromAccount} onValueChange={setFromAccount}>\n              <SelectTrigger id=\"fromAccount\">\n                <SelectValue placeholder=\"Select account\" />\n              </SelectTrigger>\n              <SelectContent>\n                {accounts.map((acc) => (\n                  <SelectItem key={acc.id} value={acc.id}>\n                    <div className=\"flex items-center justify-between w-full\">\n                      <span>{acc.name}</span>\n                      <span className=\"text-muted-foreground ml-4\">\n                        {formatCurrency(acc.availableBalance, acc.currency)}\n                      </span>\n                    </div>\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"toBeneficiary\">To Beneficiary</Label>\n            <Select value={toBeneficiary} onValueChange={setToBeneficiary}>\n              <SelectTrigger id=\"toBeneficiary\">\n                <SelectValue placeholder=\"Select beneficiary\" />\n              </SelectTrigger>\n              <SelectContent>\n                {filteredBeneficiaries.map((ben) => (\n                  <SelectItem key={ben.id} value={ben.id}>\n                    <div>\n                      <span>{ben.name}</span>\n                      <span className=\"text-muted-foreground text-xs ml-2\">{ben.bankName}</span>\n                    </div>\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"amount\">Amount (AED)</Label>\n            <Input\n              id=\"amount\"\n              type=\"number\"\n              placeholder=\"0.00\"\n              value={amount}\n              onChange={(e) => setAmount(e.target.value)}\n              className=\"text-2xl h-14\"\n            />\n            {selectedFromAccount && Number.parseFloat(amount) > selectedFromAccount.availableBalance && (\n              <p className=\"text-sm text-destructive flex items-center gap-1\">\n                <AlertTriangle className=\"h-3 w-3\" />\n                Insufficient balance\n              </p>\n            )}\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"reference\">Reference (Optional)</Label>\n            <Textarea\n              id=\"reference\"\n              placeholder=\"Add a note for this transfer...\"\n              value={reference}\n              onChange={(e) => setReference(e.target.value)}\n              className=\"resize-none\"\n              rows={2}\n            />\n          </div>\n\n          <Button\n            className=\"w-full\"\n            size=\"lg\"\n            disabled={!fromAccount || !toBeneficiary || !amount || Number.parseFloat(amount) <= 0}\n            onClick={() => setShowConfirm(true)}\n          >\n            Review Transfer\n            <ArrowRight className=\"ml-2 h-4 w-4\" />\n          </Button>\n        </div>\n\n        {/* AI Helper Panel */}\n        <Card className=\"bg-gradient-to-br from-primary/10 via-primary/5 to-transparent border-primary/20\">\n          <CardHeader>\n            <div className=\"flex items-center gap-2\">\n              <Bot className=\"h-4 w-4 text-primary\" />\n              <CardTitle className=\"text-sm\">Transfer Assistant</CardTitle>\n            </div>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            {amount && Number.parseFloat(amount) > 0 && selectedBeneficiary ? (\n              <>\n                <p className=\"text-sm text-muted-foreground\">{aiExplanation.message}</p>\n                <div className=\"space-y-2\">\n                  <p className=\"text-xs text-muted-foreground\">Sources:</p>\n                  <div className=\"flex flex-wrap gap-1\">\n                    {aiExplanation.citations.map((cite) => (\n                      <CitationBadge key={cite.id} citation={cite as Citation} />\n                    ))}\n                  </div>\n                </div>\n                <div className=\"space-y-2\">\n                  <p className=\"text-xs text-muted-foreground\">Data used:</p>\n                  <DataUsedBadges dataUsed={aiExplanation.dataUsed} />\n                </div>\n                <ConfidenceIndicator confidence=\"high\" />\n              </>\n            ) : (\n              <p className=\"text-sm text-muted-foreground\">\n                Enter transfer details and I&apos;ll explain fees, estimated arrival time, and any applicable limits.\n              </p>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Confirmation Dialog */}\n      <Dialog open={showConfirm} onOpenChange={setShowConfirm}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Confirm Transfer</DialogTitle>\n            <DialogDescription>Please review the transfer details before confirming.</DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-4 py-4\">\n            <div className=\"p-4 rounded-lg bg-muted/30 space-y-3\">\n              <div className=\"flex justify-between\">\n                <span className=\"text-muted-foreground\">From</span>\n                <span className=\"font-medium\">{selectedFromAccount?.name}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-muted-foreground\">To</span>\n                <span className=\"font-medium\">{selectedBeneficiary?.name}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-muted-foreground\">Amount</span>\n                <span className=\"font-medium\">{formatCurrency(Number.parseFloat(amount || \"0\"))}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-muted-foreground\">Fee</span>\n                <span className=\"font-medium\">{formatCurrency(getFees())}</span>\n              </div>\n              <div className=\"border-t pt-2 flex justify-between\">\n                <span className=\"text-muted-foreground\">Total</span>\n                <span className=\"font-bold\">{formatCurrency(Number.parseFloat(amount || \"0\") + getFees())}</span>\n              </div>\n            </div>\n\n            {/* Compliance Checklist */}\n            <div className=\"space-y-2\">\n              <p className=\"text-sm font-medium flex items-center gap-2\">\n                <ShieldCheck className=\"h-4 w-4 text-primary\" />\n                Compliance Checks\n              </p>\n              <div className=\"space-y-1\">\n                <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                  <CheckCircle2 className=\"h-4 w-4 text-emerald-500\" />\n                  Sanctions screening: Passed\n                </div>\n                <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                  <CheckCircle2 className=\"h-4 w-4 text-emerald-500\" />\n                  Daily limit check: Passed\n                </div>\n                <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                  <CheckCircle2 className=\"h-4 w-4 text-emerald-500\" />\n                  Account verification: Verified\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setShowConfirm(false)}>\n              Cancel\n            </Button>\n            <Button onClick={handleTransfer} disabled={isProcessing}>\n              {isProcessing ? (\n                <>\n                  <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                  Processing...\n                </>\n              ) : (\n                \"Confirm Transfer\"\n              )}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Success Dialog */}\n      <Dialog open={showSuccess} onOpenChange={setShowSuccess}>\n        <DialogContent>\n          <div className=\"text-center py-6\">\n            <div className=\"flex items-center justify-center w-16 h-16 rounded-full bg-emerald-500/20 mx-auto mb-4\">\n              <CheckCircle2 className=\"h-8 w-8 text-emerald-500\" />\n            </div>\n            <h3 className=\"text-xl font-semibold mb-2\">Transfer Initiated</h3>\n            <p className=\"text-muted-foreground\">\n              Your transfer of {formatCurrency(Number.parseFloat(amount || \"0\"))} to {selectedBeneficiary?.name} has\n              been initiated.\n            </p>\n            <p className=\"text-sm text-muted-foreground mt-2\">Expected arrival: {getETA()}</p>\n          </div>\n          <DialogFooter>\n            <Button\n              className=\"w-full\"\n              onClick={() => {\n                setShowSuccess(false)\n                setAmount(\"\")\n                setReference(\"\")\n                setToBeneficiary(\"\")\n              }}\n            >\n              Done\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  )\n}\n\nfunction BeneficiariesList() {\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"font-medium\">Saved Beneficiaries</h3>\n        <Button size=\"sm\">\n          <Plus className=\"h-4 w-4 mr-1\" />\n          Add New\n        </Button>\n      </div>\n\n      <div className=\"space-y-3\">\n        {mockBeneficiaries.map((ben) => (\n          <Card key={ben.id}>\n            <CardContent className=\"p-4 flex items-center justify-between\">\n              <div className=\"flex items-center gap-3\">\n                <div\n                  className={`flex items-center justify-center w-10 h-10 rounded-full ${\n                    ben.type === \"internal\"\n                      ? \"bg-primary/20\"\n                      : ben.type === \"domestic\"\n                        ? \"bg-blue-500/20\"\n                        : \"bg-purple-500/20\"\n                  }`}\n                >\n                  {ben.type === \"internal\" ? (\n                    <Building className=\"h-5 w-5 text-primary\" />\n                  ) : ben.type === \"domestic\" ? (\n                    <Send className=\"h-5 w-5 text-blue-500\" />\n                  ) : (\n                    <Globe className=\"h-5 w-5 text-purple-500\" />\n                  )}\n                </div>\n                <div>\n                  <p className=\"font-medium\">{ben.name}</p>\n                  <p className=\"text-sm text-muted-foreground\">\n                    {ben.bankName} â€¢ {formatAccountNumber(ben.accountNumber)}\n                  </p>\n                </div>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <Badge variant=\"secondary\" className=\"capitalize\">\n                  {ben.type}\n                </Badge>\n                <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8 text-muted-foreground hover:text-destructive\">\n                  <Trash2 className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n    </div>\n  )\n}\n\nexport default function PaymentsPage() {\n  const aiQuestions = [\n    \"What are the transfer fees?\",\n    \"How long do international transfers take?\",\n    \"What's my daily transfer limit?\",\n    \"How do I add a new beneficiary?\",\n  ]\n\n  return (\n    <div className=\"space-y-6\">\n      <PageHeader title=\"Payments & Transfers\" description=\"Send money and manage your beneficiaries\" />\n\n      <Tabs defaultValue=\"transfer\" className=\"space-y-6\">\n        <TabsList>\n          <TabsTrigger value=\"transfer\">New Transfer</TabsTrigger>\n          <TabsTrigger value=\"beneficiaries\">Beneficiaries</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"transfer\">\n          <TransferForm />\n        </TabsContent>\n\n        <TabsContent value=\"beneficiaries\">\n          <BeneficiariesList />\n        </TabsContent>\n      </Tabs>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}