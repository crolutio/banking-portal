(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,92854,e=>{"use strict";var t=e.i(99055),s=e.i(65379);function a({title:e,description:a,children:i,className:r}){return(0,t.jsxs)("div",{className:(0,s.cn)("flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",r),children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight text-foreground text-balance",children:e}),a&&(0,t.jsx)("p",{className:"text-muted-foreground mt-1 text-pretty",children:a})]}),i&&(0,t.jsx)("div",{className:"flex items-center gap-2",children:i})]})}e.s(["PageHeader",()=>a])},35807,e=>{"use strict";var t=e.i(99055),s=e.i(46590),a=e.i(80697),i=e.i(65379);function r({...e}){return(0,t.jsx)(s.Root,{"data-slot":"dialog",...e})}function l({...e}){return(0,t.jsx)(s.Trigger,{"data-slot":"dialog-trigger",...e})}function n({...e}){return(0,t.jsx)(s.Portal,{"data-slot":"dialog-portal",...e})}function d({className:e,...a}){return(0,t.jsx)(s.Overlay,{"data-slot":"dialog-overlay",className:(0,i.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...a})}function c({className:e,children:r,showCloseButton:l=!0,...c}){return(0,t.jsxs)(n,{"data-slot":"dialog-portal",children:[(0,t.jsx)(d,{}),(0,t.jsxs)(s.Content,{"data-slot":"dialog-content",className:(0,i.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...c,children:[r,l&&(0,t.jsxs)(s.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(a.XIcon,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function o({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,i.cn)("flex flex-col gap-2 text-center sm:text-left",e),...s})}function m({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,i.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...s})}function x({className:e,...a}){return(0,t.jsx)(s.Title,{"data-slot":"dialog-title",className:(0,i.cn)("text-lg leading-none font-semibold",e),...a})}function h({className:e,...a}){return(0,t.jsx)(s.Description,{"data-slot":"dialog-description",className:(0,i.cn)("text-muted-foreground text-sm",e),...a})}e.s(["Dialog",()=>r,"DialogContent",()=>c,"DialogDescription",()=>h,"DialogFooter",()=>m,"DialogHeader",()=>o,"DialogTitle",()=>x,"DialogTrigger",()=>l])},78138,65419,e=>{"use strict";var t=e.i(17593);let s=(0,t.default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>s],78138);let a=(0,t.default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>a],65419)},64988,e=>{"use strict";var t=e.i(99055),s=e.i(29481),a=e.i(41938),i=e.i(12245),r=e.i(92854),l=e.i(10320),n=e.i(35830),d=e.i(30239),c=e.i(83951),o=e.i(35807),m=e.i(48350),x=e.i(79444),h=e.i(56123),u=e.i(44651),p=e.i(68906),g=e.i(17593);let j=(0,g.default)("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]),f=(0,g.default)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),y=(0,g.default)("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);var N=e.i(37523),v=e.i(24547),b=e.i(44323),C=e.i(78138),w=e.i(65419),k=e.i(80078),D=e.i(90517),z=e.i(21994);function S({card:e,showDetails:a=!1}){let[r,l]=(0,s.useState)(!1),n=()=>"credit"===e.type?"from-slate-800 via-slate-700 to-slate-900":"virtual"===e.type?"from-indigo-600 via-indigo-500 to-indigo-700":"from-emerald-600 via-emerald-500 to-emerald-700";return(0,t.jsx)("div",{className:"relative w-full aspect-[1.586/1] perspective-1000 cursor-pointer",onClick:()=>l(!r),children:(0,t.jsxs)("div",{className:`relative w-full h-full transition-transform duration-500 transform-style-preserve-3d ${r?"rotate-y-180":""}`,children:[(0,t.jsxs)("div",{className:`absolute inset-0 backface-hidden rounded-2xl p-6 flex flex-col justify-between bg-gradient-to-br ${n()}`,children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-10 h-7 bg-amber-400 rounded-md"}),"virtual"===e.type&&(0,t.jsx)(d.Badge,{variant:"outline",className:"bg-white/10 border-white/20 text-white text-[10px]",children:"VIRTUAL"})]}),(0,t.jsx)("span",{className:"text-white/80 text-sm font-medium",children:e.brand})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-white/60 text-xs mb-1",children:"Card Number"}),(0,t.jsx)("p",{className:"text-white text-lg tracking-widest font-mono",children:a?`•••• •••• •••• ${e.lastFour}`:(0,i.formatCardNumber)(e.lastFour)})]}),(0,t.jsxs)("div",{className:"flex items-end justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-white/60 text-[10px] mb-0.5",children:"CARDHOLDER"}),(0,t.jsx)("p",{className:"text-white text-sm",children:e.cardholderName})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-white/60 text-[10px] mb-0.5",children:"EXPIRES"}),(0,t.jsx)("p",{className:"text-white text-sm",children:e.expiryDate})]})]})]}),(0,t.jsxs)("div",{className:`absolute inset-0 backface-hidden rotate-y-180 rounded-2xl bg-gradient-to-br ${n()}`,children:[(0,t.jsx)("div",{className:"w-full h-10 bg-black/40 mt-6"}),(0,t.jsxs)("div",{className:"p-6 mt-2",children:[(0,t.jsx)("div",{className:"bg-white/90 rounded p-2 text-right",children:(0,t.jsx)("span",{className:"text-slate-800 font-mono text-sm tracking-wider",children:"•••"})}),(0,t.jsx)("p",{className:"text-white/60 text-xs mt-4 text-center",children:"Tap to flip back"})]})]})]})})}function T({card:e,onFreeze:a,onUnfreeze:r}){let[l,d]=(0,s.useState)(!1),[c,h]=(0,s.useState)(!1),[p,g]=(0,s.useState)(e.limit||5e4);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsx)(n.Button,{variant:"frozen"===e.status?"default":"outline",className:"flex items-center gap-2",onClick:"frozen"===e.status?r:a,children:"frozen"===e.status?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f,{className:"h-4 w-4"}),"Unfreeze"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j,{className:"h-4 w-4"}),"Freeze"]})}),(0,t.jsxs)(n.Button,{variant:"outline",className:"flex items-center gap-2 bg-transparent",onClick:()=>d(!0),children:[(0,t.jsx)(y,{className:"h-4 w-4"}),"Limits"]}),(0,t.jsxs)(n.Button,{variant:"outline",className:"flex items-center gap-2 col-span-2 bg-transparent",onClick:()=>h(!0),children:[(0,t.jsx)(w.RefreshCw,{className:"h-4 w-4"}),"Replace Card"]})]}),(0,t.jsx)(o.Dialog,{open:l,onOpenChange:d,children:(0,t.jsxs)(o.DialogContent,{children:[(0,t.jsxs)(o.DialogHeader,{children:[(0,t.jsx)(o.DialogTitle,{children:"Card Limits"}),(0,t.jsx)(o.DialogDescription,{children:"Adjust your daily transaction limits"})]}),(0,t.jsxs)("div",{className:"space-y-6 py-4",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(x.Label,{children:"Daily Transaction Limit"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:(0,i.formatCurrency)(p)})]}),(0,t.jsx)(m.Slider,{value:[p],onValueChange:([e])=>g(e),min:1e3,max:1e5,step:1e3}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Limit can be set between ",(0,i.formatCurrency)(1e3)," and ",(0,i.formatCurrency)(1e5)]})]}),(0,t.jsxs)("div",{className:"p-3 rounded-lg bg-muted/30 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(b.Bot,{className:"h-4 w-4 text-primary"}),(0,t.jsx)("span",{className:"font-medium",children:"Policy Reference"})]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Per Card Terms v3.0, daily limits can be adjusted up to your account maximum. Changes take effect immediately."}),(0,t.jsx)(u.CitationBadge,{citation:{id:"cite_1",source:"Card Terms v3.0",type:"product_terms"},className:"mt-2"})]})]}),(0,t.jsxs)(o.DialogFooter,{children:[(0,t.jsx)(n.Button,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),(0,t.jsx)(n.Button,{onClick:()=>d(!1),children:"Save Changes"})]})]})}),(0,t.jsx)(o.Dialog,{open:c,onOpenChange:h,children:(0,t.jsxs)(o.DialogContent,{children:[(0,t.jsxs)(o.DialogHeader,{children:[(0,t.jsx)(o.DialogTitle,{children:"Replace Card"}),(0,t.jsx)(o.DialogDescription,{children:"Request a replacement for your card"})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{htmlFor:"reason",children:"Reason for Replacement"}),(0,t.jsxs)("select",{id:"reason",className:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm",children:[(0,t.jsx)("option",{value:"damaged",children:"Card Damaged"}),(0,t.jsx)("option",{value:"lost",children:"Card Lost"}),(0,t.jsx)("option",{value:"stolen",children:"Card Stolen"}),(0,t.jsx)("option",{value:"expired",children:"Card Expiring Soon"})]})]}),(0,t.jsx)("div",{className:"p-3 rounded-lg bg-yellow-500/10 border border-yellow-500/30",children:(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(N.AlertTriangle,{className:"h-4 w-4 text-yellow-500 mt-0.5"}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("p",{className:"font-medium text-yellow-500",children:"Important"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Your current card will be deactivated immediately if you select “Lost” or “Stolen”."})]})]})}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Replacement fee:"," ",(0,t.jsx)("span",{className:"text-foreground font-medium",children:"credit"===e.type?"Free":"AED 50"})]})]}),(0,t.jsxs)(o.DialogFooter,{children:[(0,t.jsx)(n.Button,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),(0,t.jsx)(n.Button,{onClick:()=>h(!1),children:"Request Replacement"})]})]})})]})}function B({card:e}){let s=!0,a="Entertainment",i=45;return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(l.Card,{className:"bg-gradient-to-br from-primary/10 via-primary/5 to-transparent border-primary/20",children:[(0,t.jsx)(l.CardHeader,{className:"pb-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(b.Bot,{className:"h-4 w-4 text-primary"}),(0,t.jsx)(l.CardTitle,{className:"text-sm",children:"Card Benefits"})]})}),(0,t.jsxs)(l.CardContent,{children:[(0,t.jsx)("ul",{className:"space-y-2",children:["Lounge access: 4 complimentary visits remaining","Travel insurance: Active for international trips","Extended warranty: Covers electronics purchases"].map((e,s)=>(0,t.jsxs)("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-primary",children:"•"}),e]},s))}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-3",children:(0,t.jsx)(u.CitationBadge,{citation:{id:"cite_1",source:"Card T&Cs v3.0",type:"product_terms"}})}),(0,t.jsx)(u.ConfidenceIndicator,{confidence:"high",className:"mt-2"})]})]}),s&&(0,t.jsxs)(l.Card,{className:"border-yellow-500/30 bg-yellow-500/5",children:[(0,t.jsx)(l.CardHeader,{className:"pb-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(v.TrendingUp,{className:"h-4 w-4 text-yellow-500"}),(0,t.jsx)(l.CardTitle,{className:"text-sm text-yellow-500",children:"Unusual Spend Detected"})]})}),(0,t.jsxs)(l.CardContent,{children:[(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Your ",a," spending is ",i,"% higher than your average this month."]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:(0,t.jsx)(u.CitationBadge,{citation:{id:"cite_2",source:"Transaction History",type:"transaction_history"}})})]})]})]})}function R(){let{currentUser:e}=(0,a.useRole)(),[o,m]=(0,s.useState)(null),[x,u]=(0,s.useState)([]),[g,j]=(0,s.useState)(!0);(0,s.useEffect)(()=>{!async function(){if(!e?.id)return;j(!0);let t=(0,z.createClient)(),{data:s,error:a}=await t.from("cards").select("*").eq("user_id",e.id);a?console.error("Error fetching cards:",a):u((s||[]).map(e=>({id:e.id,userId:e.user_id,accountId:e.account_id,type:e.type,brand:e.brand,lastFour:e.last_four,expiryDate:e.expiry_date,status:e.status,limit:e.credit_limit?Number(e.credit_limit):void 0,spent:e.spent_amount?Number(e.spent_amount):void 0,cardholderName:e.cardholder_name}))),j(!1)}()},[e]);let f=async e=>{console.log("Freezing card:",e),u(t=>t.map(t=>t.id===e?{...t,status:"frozen"}:t))},y=async e=>{console.log("Unfreezing card:",e),u(t=>t.map(t=>t.id===e?{...t,status:"active"}:t))};return g?(0,t.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,t.jsx)(k.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(r.PageHeader,{title:"Cards",description:"Manage your debit and credit cards"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-2",children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:x.map(e=>(0,t.jsxs)(h.Sheet,{children:[(0,t.jsx)(h.SheetTrigger,{asChild:!0,children:(0,t.jsx)(l.Card,{className:"cursor-pointer hover:bg-muted/30 transition-colors overflow-hidden",children:(0,t.jsxs)(l.CardContent,{className:"p-0",children:[(0,t.jsx)("div",{className:"p-4",children:(0,t.jsx)(S,{card:e})}),(0,t.jsxs)("div",{className:"p-4 border-t",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-medium capitalize",children:[e.type," Card"]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.brand})]}),(0,t.jsx)(d.Badge,{variant:"secondary",className:"frozen"===e.status?"bg-blue-500/20 text-blue-500":"bg-emerald-500/20 text-emerald-500",children:"frozen"===e.status?"Frozen":"Active"})]}),e.limit&&void 0!==e.spent&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Spent this month"}),(0,t.jsxs)("span",{children:[(0,i.formatCurrency)(e.spent)," / ",(0,i.formatCurrency)(e.limit)]})]}),(0,t.jsx)(c.Progress,{value:e.spent/e.limit*100,className:"h-2"})]})]})]})})}),(0,t.jsxs)(h.SheetContent,{className:"w-full sm:max-w-lg overflow-y-auto",children:[(0,t.jsxs)(h.SheetHeader,{children:[(0,t.jsxs)(h.SheetTitle,{className:"capitalize",children:[e.type," Card"]}),(0,t.jsx)(h.SheetDescription,{children:"Manage your card and view insights"})]}),(0,t.jsxs)("div",{className:"mt-6 space-y-6",children:[(0,t.jsx)(S,{card:e,showDetails:!0}),(0,t.jsx)("div",{className:"p-4 rounded-lg bg-muted/30",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Card Number"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("p",{className:"text-sm font-medium",children:["•••• ",e.lastFour]}),(0,t.jsx)(n.Button,{variant:"ghost",size:"icon",className:"h-6 w-6",children:(0,t.jsx)(C.Copy,{className:"h-3 w-3"})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Expiry"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:e.expiryDate})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Status"}),(0,t.jsx)(d.Badge,{variant:"secondary",className:"frozen"===e.status?"bg-blue-500/20 text-blue-500":"bg-emerald-500/20 text-emerald-500",children:e.status})]}),e.limit&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Credit Limit"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:(0,i.formatCurrency)(e.limit)})]})]})}),(0,t.jsx)(T,{card:e,onFreeze:()=>f(e.id),onUnfreeze:()=>y(e.id)}),(0,t.jsx)(B,{card:e})]})]})]},e.id))})}),(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsx)(D.AskAIBankerWidget,{questions:["What are my card benefits?","How do I increase my credit limit?","Why was my card declined?","How do I report a lost card?"],description:"Get help with your cards"})})]}),0===x.length&&(0,t.jsxs)(l.Card,{className:"p-12 text-center",children:[(0,t.jsx)(p.CreditCard,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No Cards Yet"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"You don't have any cards linked to your account."}),(0,t.jsx)(n.Button,{children:"Apply for a Card"})]})]})}e.s(["default",()=>R],64988)}]);