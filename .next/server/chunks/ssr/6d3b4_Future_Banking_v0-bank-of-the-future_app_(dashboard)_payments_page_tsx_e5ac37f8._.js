module.exports=[43282,a=>{"use strict";var b=a.i(74419),c=a.i(57683),d=a.i(20949),e=a.i(62150),f=a.i(4627),g=a.i(73795),h=a.i(60696),i=a.i(9360),j=a.i(46858),k=a.i(95166),l=a.i(92645),m=a.i(69507),n=a.i(88201),o=a.i(96421),p=a.i(30167),q=a.i(51749),r=a.i(58295),s=a.i(72865),t=a.i(13960),u=a.i(19426),v=a.i(29726),w=a.i(8995),x=a.i(36355),y=a.i(9880),z=a.i(72438),A=a.i(38448),B=a.i(52271);let C=[{id:"ben_1",name:"Sarah Johnson Savings",bankName:"Bank of the Future",accountNumber:"1234567891",type:"internal"},{id:"ben_2",name:"Ahmed Al-Rashid",bankName:"Emirates NBD",accountNumber:"2345678901",type:"domestic"},{id:"ben_3",name:"TechStart Solutions",bankName:"Bank of the Future",accountNumber:"3456789012",type:"internal"},{id:"ben_4",name:"John Smith",bankName:"HSBC UK",accountNumber:"GB82WEST12345698765432",type:"international",country:"United Kingdom"}];function D(){let{currentUser:a}=(0,d.useRole)(),[f,m]=(0,c.useState)([]);(0,c.useEffect)(()=>{!async function(){if(!a?.id)return;let b=(0,B.createClient)(),{data:c}=await b.from("accounts").select("*").eq("user_id",a.id);c&&m(c.map(a=>({id:a.id,userId:a.user_id,name:a.name,type:a.type,currency:a.currency,balance:Number(a.balance),availableBalance:Number(a.available_balance),accountNumber:a.account_number,iban:a.iban,status:a.status})))}()},[a]);let[u,v]=(0,c.useState)("internal"),[D,E]=(0,c.useState)(""),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)(!1),[P,Q]=(0,c.useState)(!1),R=C.filter(a=>a.type===u),S=C.find(a=>a.id===F),T=f.find(a=>a.id===D),U=()=>"internal"===u?0:"domestic"===u?15:Math.min(500,Math.max(25,.005*Number.parseFloat(H||"0"))),V=()=>"internal"===u?"Instant":"domestic"===u?"1-2 business days":"3-5 business days",W=async()=>{O(!0);let a=(0,B.createClient)(),b=Number(H);try{let{error:c}=await a.from("transactions").insert({account_id:D,amount:b,type:"debit",category:"transfer",description:`Transfer to ${S?.name}`,merchant:S?.name,status:"completed",balance_after:(T?.balance||0)-b,date:new Date().toISOString()});if(c)throw c;T&&await a.from("accounts").update({balance:T.balance-b,available_balance:T.availableBalance-b}).eq("id",D),M(!1),Q(!0)}catch(a){console.error("Transfer failed",a)}finally{O(!1)}},X={message:`Transfer of ${(0,e.formatCurrency)(Number.parseFloat(H||"0"))} to ${S?.name||"beneficiary"}. Fee: ${(0,e.formatCurrency)(U())}. Expected arrival: ${V()}.`,citations:[{id:"cite_1",source:"Fees Policy v2.1",type:"policy"},{id:"cite_2",source:"Transfer Terms",type:"product_terms"}],dataUsed:["Account Balance","Fees Schedule","Transfer Limits"]};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(l.Tabs,{value:u,onValueChange:a=>v(a),children:(0,b.jsxs)(l.TabsList,{className:"grid w-full grid-cols-3",children:[(0,b.jsxs)(l.TabsTrigger,{value:"internal",className:"flex items-center gap-2",children:[(0,b.jsx)(t.Building,{className:"h-4 w-4"}),"Internal"]}),(0,b.jsxs)(l.TabsTrigger,{value:"domestic",className:"flex items-center gap-2",children:[(0,b.jsx)(r.Send,{className:"h-4 w-4"}),"Domestic"]}),(0,b.jsxs)(l.TabsTrigger,{value:"international",className:"flex items-center gap-2",children:[(0,b.jsx)(s.Globe,{className:"h-4 w-4"}),"International"]})]})}),(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"fromAccount",children:"From Account"}),(0,b.jsxs)(k.Select,{value:D,onValueChange:E,children:[(0,b.jsx)(k.SelectTrigger,{id:"fromAccount",children:(0,b.jsx)(k.SelectValue,{placeholder:"Select account"})}),(0,b.jsx)(k.SelectContent,{children:f.map(a=>(0,b.jsx)(k.SelectItem,{value:a.id,children:(0,b.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,b.jsx)("span",{children:a.name}),(0,b.jsx)("span",{className:"text-muted-foreground ml-4",children:(0,e.formatCurrency)(a.availableBalance,a.currency)})]})},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"toBeneficiary",children:"To Beneficiary"}),(0,b.jsxs)(k.Select,{value:F,onValueChange:G,children:[(0,b.jsx)(k.SelectTrigger,{id:"toBeneficiary",children:(0,b.jsx)(k.SelectValue,{placeholder:"Select beneficiary"})}),(0,b.jsx)(k.SelectContent,{children:R.map(a=>(0,b.jsx)(k.SelectItem,{value:a.id,children:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{children:a.name}),(0,b.jsx)("span",{className:"text-muted-foreground text-xs ml-2",children:a.bankName})]})},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"amount",children:"Amount (AED)"}),(0,b.jsx)(i.Input,{id:"amount",type:"number",placeholder:"0.00",value:H,onChange:a=>I(a.target.value),className:"text-2xl h-14"}),T&&Number.parseFloat(H)>T.availableBalance&&(0,b.jsxs)("p",{className:"text-sm text-destructive flex items-center gap-1",children:[(0,b.jsx)(y.AlertTriangle,{className:"h-3 w-3"}),"Insufficient balance"]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"reference",children:"Reference (Optional)"}),(0,b.jsx)(o.Textarea,{id:"reference",placeholder:"Add a note for this transfer...",value:J,onChange:a=>K(a.target.value),className:"resize-none",rows:2})]}),(0,b.jsxs)(h.Button,{className:"w-full",size:"lg",disabled:!D||!F||!H||0>=Number.parseFloat(H),onClick:()=>M(!0),children:["Review Transfer",(0,b.jsx)(q.ArrowRight,{className:"ml-2 h-4 w-4"})]})]}),(0,b.jsxs)(g.Card,{className:"bg-gradient-to-br from-primary/10 via-primary/5 to-transparent border-primary/20",children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(w.Bot,{className:"h-4 w-4 text-primary"}),(0,b.jsx)(g.CardTitle,{className:"text-sm",children:"Transfer Assistant"})]})}),(0,b.jsx)(g.CardContent,{className:"space-y-4",children:H&&Number.parseFloat(H)>0&&S?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:X.message}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Sources:"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:X.citations.map(a=>(0,b.jsx)(p.CitationBadge,{citation:a},a.id))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Data used:"}),(0,b.jsx)(p.DataUsedBadges,{dataUsed:X.dataUsed})]}),(0,b.jsx)(p.ConfidenceIndicator,{confidence:"high"})]}):(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Enter transfer details and I'll explain fees, estimated arrival time, and any applicable limits."})})]})]}),(0,b.jsx)(n.Dialog,{open:L,onOpenChange:M,children:(0,b.jsxs)(n.DialogContent,{children:[(0,b.jsxs)(n.DialogHeader,{children:[(0,b.jsx)(n.DialogTitle,{children:"Confirm Transfer"}),(0,b.jsx)(n.DialogDescription,{children:"Please review the transfer details before confirming."})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"p-4 rounded-lg bg-muted/30 space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"From"}),(0,b.jsx)("span",{className:"font-medium",children:T?.name})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"To"}),(0,b.jsx)("span",{className:"font-medium",children:S?.name})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Amount"}),(0,b.jsx)("span",{className:"font-medium",children:(0,e.formatCurrency)(Number.parseFloat(H||"0"))})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Fee"}),(0,b.jsx)("span",{className:"font-medium",children:(0,e.formatCurrency)(U())})]}),(0,b.jsxs)("div",{className:"border-t pt-2 flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Total"}),(0,b.jsx)("span",{className:"font-bold",children:(0,e.formatCurrency)(Number.parseFloat(H||"0")+U())})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("p",{className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(x.ShieldCheck,{className:"h-4 w-4 text-primary"}),"Compliance Checks"]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(z.CheckCircle2,{className:"h-4 w-4 text-emerald-500"}),"Sanctions screening: Passed"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(z.CheckCircle2,{className:"h-4 w-4 text-emerald-500"}),"Daily limit check: Passed"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(z.CheckCircle2,{className:"h-4 w-4 text-emerald-500"}),"Account verification: Verified"]})]})]})]}),(0,b.jsxs)(n.DialogFooter,{children:[(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>M(!1),children:"Cancel"}),(0,b.jsx)(h.Button,{onClick:W,disabled:N,children:N?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(A.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):"Confirm Transfer"})]})]})}),(0,b.jsx)(n.Dialog,{open:P,onOpenChange:Q,children:(0,b.jsxs)(n.DialogContent,{children:[(0,b.jsxs)("div",{className:"text-center py-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-center w-16 h-16 rounded-full bg-emerald-500/20 mx-auto mb-4",children:(0,b.jsx)(z.CheckCircle2,{className:"h-8 w-8 text-emerald-500"})}),(0,b.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Transfer Initiated"}),(0,b.jsxs)("p",{className:"text-muted-foreground",children:["Your transfer of ",(0,e.formatCurrency)(Number.parseFloat(H||"0"))," to ",S?.name," has been initiated."]}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:["Expected arrival: ",V()]})]}),(0,b.jsx)(n.DialogFooter,{children:(0,b.jsx)(h.Button,{className:"w-full",onClick:()=>{Q(!1),I(""),K(""),G("")},children:"Done"})})]})})]})}function E(){return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"font-medium",children:"Saved Beneficiaries"}),(0,b.jsxs)(h.Button,{size:"sm",children:[(0,b.jsx)(u.Plus,{className:"h-4 w-4 mr-1"}),"Add New"]})]}),(0,b.jsx)("div",{className:"space-y-3",children:C.map(a=>(0,b.jsx)(g.Card,{children:(0,b.jsxs)(g.CardContent,{className:"p-4 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${"internal"===a.type?"bg-primary/20":"domestic"===a.type?"bg-blue-500/20":"bg-purple-500/20"}`,children:"internal"===a.type?(0,b.jsx)(t.Building,{className:"h-5 w-5 text-primary"}):"domestic"===a.type?(0,b.jsx)(r.Send,{className:"h-5 w-5 text-blue-500"}):(0,b.jsx)(s.Globe,{className:"h-5 w-5 text-purple-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.name}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[a.bankName," â€¢ ",(0,e.formatAccountNumber)(a.accountNumber)]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(m.Badge,{variant:"secondary",className:"capitalize",children:a.type}),(0,b.jsx)(h.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-destructive",children:(0,b.jsx)(v.Trash2,{className:"h-4 w-4"})})]})]})},a.id))})]})}function F(){return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(f.PageHeader,{title:"Payments & Transfers",description:"Send money and manage your beneficiaries"}),(0,b.jsxs)(l.Tabs,{defaultValue:"transfer",className:"space-y-6",children:[(0,b.jsxs)(l.TabsList,{children:[(0,b.jsx)(l.TabsTrigger,{value:"transfer",children:"New Transfer"}),(0,b.jsx)(l.TabsTrigger,{value:"beneficiaries",children:"Beneficiaries"})]}),(0,b.jsx)(l.TabsContent,{value:"transfer",children:(0,b.jsx)(D,{})}),(0,b.jsx)(l.TabsContent,{value:"beneficiaries",children:(0,b.jsx)(E,{})})]})]})}a.s(["default",()=>F])}];

//# sourceMappingURL=6d3b4_Future_Banking_v0-bank-of-the-future_app_%28dashboard%29_payments_page_tsx_e5ac37f8._.js.map